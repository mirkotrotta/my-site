![Build & Push](https://github.com/mirkotrotta/my-site/actions/workflows/build.yml/badge.svg)
[![Deploy to Hetzner](https://github.com/mirkotrotta/my-site/actions/workflows/deploy.yml/badge.svg)](https://github.com/mirkotrotta/my-site/actions/workflows/deploy.yml)

# my-site

This is my private personal website repository. Built using the [Moon Site](https://github.com/mirkotrotta/moon-site) template, it's used to power my portfolio, blog, and resume at [https://my-domain.com](https://my-domain.com).

---

For the open-source template version, visit:
üëâ [github.com/mirkotrotta/moon-site](https://github.com/mirkotrotta/moon-site)

---

## Deployment

This application is deployed to **Hetzner Cloud** using Docker Compose with Nginx Proxy Manager for reverse proxy and SSL termination. The deployment is fully automated via GitHub Actions CI/CD.

- **Production Stack**: Uses `compose.production.yaml` with NPM on ports 80/443/81
- **CI/CD**: Automated deployment on every push to `main` branch
- **Container Registry**: GitHub Container Registry (GHCR)
- **Deployment Target**: Hetzner CPX21 VM at `/opt/mirkotrotta`

## GitHub Secrets Configuration

The following secrets must be configured in your GitHub repository settings (`Settings` ‚Üí `Secrets and variables` ‚Üí `Actions`) for the CI/CD pipeline to work:

### üîë Hetzner Server Secrets
| Secret Name | Description | Example |
|-------------|-------------|---------|
| `HETZNER_SERVER_IP` | IP address of your Hetzner Cloud VM | `1.2.3.4` |
| `HETZNER_SSH_USER` | SSH username for deployment | `deploy` |
| `HETZNER_SSH_PRIVATE_KEY` | SSH private key for server access | `-----BEGIN OPENSSH PRIVATE KEY-----` |
| `HETZNER_SSH_PASSPHRASE` | SSH key passphrase (if applicable) | `your-passphrase` |

### üåê Domain & Networking
| Secret Name | Description | Example |
|-------------|-------------|---------|
| `PROD_DOMAIN` | Production domain name | `example.com` |
| `ACME_EMAIL` | Email for Let's Encrypt certificates | `admin@example.com` |

### üóÑÔ∏è Database Configuration
| Secret Name | Description | Example |
|-------------|-------------|---------|
| `POSTGRES_USER_PROD` | PostgreSQL username | `mysite_user` |
| `POSTGRES_PASSWORD_PROD` | PostgreSQL password | `secure_password_123` |
| `POSTGRES_DB_PROD` | PostgreSQL database name | `mysite_prod` |

### üîß API & Integration Secrets
| Secret Name | Description | Example |
|-------------|-------------|---------|
| `GITHUB_TOKEN` | GitHub API token for repository access | `ghp_xxxxxxxxxxxx` |
| `RESEND_API_KEY` | Resend.com API key for transactional emails | `re_xxxxxxxxxxxx` |
| `CONTACT_EMAIL` | Contact form destination email | `contact@example.com` |

### üìä Analytics (Optional)
| Secret Name | Description | Example |
|-------------|-------------|---------|
| `NEXT_PUBLIC_GOOGLE_ANALYTICS_ID` | Google Analytics tracking ID | `G-XXXXXXXXXX` |
| `NEXT_PUBLIC_UMAMI_SITE_ID` | Umami Analytics site ID | `xxxxxxxx-xxxx-xxxx` |
| `NEXT_PUBLIC_UMAMI_URL` | Umami Analytics instance URL | `https://analytics.example.com` |

## Environment Variables

This project uses environment variables for configuration. Two template files are provided:

### .env.example

Contains all available environment variables with documentation and example values. Copy this file to create your own `.env` file:

```bash
cp .env.example .env
```

Then edit the `.env` file with your specific configuration values.

### .env.production

In production, this file is automatically generated by the GitHub Actions deployment workflow using the secrets configured above. **Do not manually create this file in production** - it will be overwritten on each deployment.

### Local Development

For local development, set `DISABLE_HTTPS=true` and use `localhost` as your domain.

### Security Note

Never commit your `.env` file with actual secrets to version control. The `.env` file is included in `.gitignore` to prevent accidental commits.
