# Simple development image for testing
FROM node:22-slim
WORKDIR /app

# Copy package files
COPY package.json package-lock.json ./

# Install dependencies
RUN npm ci

# Copy application source
COPY . .

# Fix the build script to use node directly instead of a Windows path
RUN sed -i 's/C:\\\\nvm4w\\\\nodejs\\\\node.exe node_modules\\\\next\\\\dist\\\\bin\\\\next/next/g' package.json

# Set environment variables
ENV NODE_ENV development
ENV HOSTNAME 0.0.0.0
ENV PORT 4000

# Expose port
EXPOSE 4000

# Start the development server with correct binding to 0.0.0.0
CMD ["npx", "next", "dev", "-H", "0.0.0.0", "-p", "4000"] 